# Jobs for the governance repository

- job:
    name: governance-publish
    node: 'bare-precise || bare-trusty'

    # We want to publish to the docroot but the scp publisher cannot remove
    # paths, so use a shell builder to move the content in the right place and
    # publish from there.
    builders:
      - revoke-sudo
      - gerrit-git-prep
      - docs:
          project: governance
      - shell: |
          mv doc/build/html/* .html
          rm -rf *
          mv .html/* ./

    publishers:
      - scp:
          site: static.openstack.org
          files:
            - target: governance/
              source: '**'
              keep-hierarchy: true
              copy-after-failure: false
      - console-log
